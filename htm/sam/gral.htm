<!DOCTYPE html>
<html lang="es" xmlns:fb="http://www.facebook.com/2008/fbml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>[TITULO_SITIO]</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link href="[CSS]smoothness/jquery-ui-1.10.1.custom.css" rel="stylesheet" media="screen" />
    <link href="[CSS]reset.css" rel="stylesheet" media="screen" />
    <link href="[CSS]style_sam.css" rel="stylesheet" media="screen" />

    <link href="[CSS]bootstrap.css" rel="stylesheet">
    <link href="[CSS]bootstrap-responsive.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="[CSS]tables.css" />

    <!-- CSS -->
     <!--<link href="files/css/transdmin.css" rel="stylesheet" type="text/css" media="screen" />
     <link href="files/css/jquery-impromptu.css" rel="stylesheet" type="text/css" media="screen" />
     <link href="files/css/jquery.pnotify.default.icons.css" rel="stylesheet" type="text/css" media="screen" />
     <link href="files/css/jquery.pnotify.default.css" rel="stylesheet" type="text/css" media="screen" />

     <link href="files/css/transdmin.css" rel="stylesheet" type="text/css" media="print" /> -->

    <!--[if IE 6]><link rel="stylesheet" type="text/css" media="screen" href="files/css/ie6.css" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" media="screen" href="files/css/ie7.css" /><![endif]-->

    <!-- JavaScripts-->

    <script src="[JS]jquery-1.10.2.js"></script>
    <script src="[JS]jquery-ui-1.10.1.custom.min.js"></script>
    <script src="[JS]jquery.ui.datepicker-es.js"></script>


    <script src="[JS]jquery-impromptu.3.2.js" ></script>
    <script src="[JS]simpla.jquery.configuration.js" ></script>

    <script src="[JS]bootstrap-transition.js"></script>
    <script src="[JS]bootstrap-alert.js"></script>
    <script src="[JS]bootstrap-modal.js"></script>
    <script src="[JS]bootstrap-dropdown.js"></script>
    <script src="[JS]bootstrap-scrollspy.js"></script>
    <script src="[JS]bootstrap-tab.js"></script>
    <script src="[JS]bootstrap-tooltip.js"></script>
    <script src="[JS]bootstrap-popover.js"></script>
    <script src="[JS]bootstrap-button.js"></script>
    <script src="[JS]bootstrap-collapse.js"></script>
    <script src="[JS]bootstrap-carousel.js"></script>
    <script src="[JS]bootstrap-typeahead.js"></script>
    <script src="[JS]script_gral.js?v=2"></script>
	<script src="[JS]mi_script_sam.js?v=2"></script>

   <!-- <script src="files/js/jquery.pnotify.js"></script>


    <link rel="stylesheet" href="[CSS]supersized.core.css" type="text/css" media="screen" />
	<script type="text/javascript" src="[JS]supersized.core.3.2.1.js"></script>


	<style type="text/css" title="currentStyle">
        @import "files/css/demo_page.css";
        @import "files/css/demo_table.css";
    </style>-->
    <script type="text/javascript">

        /*jQuery(function($){

            $.supersized({
                slides  :  	[ {image : '[IMG]bg.jpg', title : 'Image Credit: Maria Kazvan'} ]
            });

		});*/


		$(document).ready(function(){

			$(".eliminar_elto").each(function(){
				$(this).remove();
			})

			/*//DESACTIVA LA PRIMERA OPCION DE LOS DROPS
			$('select').livequery(function(){
				  $(this).find("option[value='']").attr("disabled", "disabled").siblings().removeAttr("disabled");
			});*/


			// ************************** DATEPICKER GRAL DE LA PAG ****************************
			function noExcursion(date){
				var day = date.getDay();
				// aqui indicamos el numero correspondiente a los dias que ha de bloquearse (el 0 es Domingo, 1 Lunes, etc...) en el ejemplo bloqueo todos menos los lunes y jueves.
				return [(day != 0 && day != 2 && day != 3 && day != 5 && day != 6), ''];
			};

			function showStartDate(dateText, inst){
				alert (dateText);
			}

			function Validar(){
				//VALIDO EL ELEMENTO FECHA
				$(this).valid()
			}

			$(function(){
				// Datepicker
				$(".datepicker").datepicker({
					changeMonth: true,
					changeYear: true,
					dateFormat: 'dd/mm/yy',
					//PARA EXCLUIR DIAS Y PARA COMENZAR EN UN DIA DETERMINADO
					//beforeShowDay: noExcursion,
					onSelect : Validar

				});
				$.datepicker.setDefaults($.datepicker.regional['es']);
			});
			// ******************************************************************************


			$("#seleccionar_todo").click( function(){
			   if( $(this).is(':checked') ){
				 $(".seleccion").each (function(){
					 $(this).prop('checked',true);
				 });

				 $("#btn_eliminar_seleccion").fadeIn();
			   }else{
				 $(".seleccion").each (function(){
					 $(this).prop('checked',false);
				 });

				 $("#btn_eliminar_seleccion").fadeOut();
			   }
			});

			/*$(".seleccion").click( function(){
				if( $(this).is(':checked') ){
					 $("#btn_eliminar_seleccion").fadeIn();
				}else{
					//VERIFICO SI HAY UNA OPCION TILDADA
					var band = 0;
					$(".seleccion").each (function(){
						if( $(this).is(':checked') ){
							band = 1;
						}
					});

					if (band == 0)
						$("#btn_eliminar_seleccion").fadeOut();
				}

				//VERIFICO CUANTAS OPCIONES ESTAN TILDADAS
				var cant_checked = 0;
				$(".seleccion").each (function(){
					if( $(this).is(':checked') ){
						cant_checked++;
					}
				});

				//CANTIDAD TOTAL DE OPCIONES
				var cant_opciones = $(".seleccion").size();

				//VERIFICO SI LA CANTIDAD TOTAL DE OPCIONES ES IGUAL A LAS CHECKEADAS PARA TILDAR O DESTILDAR EL CHECKBOX DEL ENCABEZADO
				if (cant_opciones == cant_checked){
					$("#seleccionar_todo").prop('checked',true);
				}else{
					$("#seleccionar_todo").prop('checked',false);
				}




			});*/
		});

		function imprimir(){
		  if (parseInt(navigator.appVersion)>4){
			document.URL = "";
			window.print();
		  }
		}

		$(function() {
			$( "input[type=submit], input[type=button]" ).button();
			$( "a#btn_alta" ).button({icons: {primary:'ui-icon-plusthick',secondary:''}});
			$( "a.button" ).button({ text: false });
			$( "a#btn_eliminar_seleccion" ).button({icons: {primary:'ui-icon-cancel',secondary:''}});
			$( "a#btn_reportes_gestiones" ).button({icons: {primary:'ui-icon-bullet',secondary:''}});
			$( "a.btn_conf").button({icons: {primary:'ui-icon-bullet',secondary:''}});
			$( "a.btn_imprimir").button({icons: {primary:'ui-icon-print',secondary:''}});

			$( "a.btn_cargar").button({icons: {primary:'ui-icon-check',secondary:''}});

		  });



		$(document).delegate(".btn_opciones","click", function(e){
			e.preventDefault();
			var tipo_btn = $(this).data("tipo_btn");
			var id = $(this).data("id");

			if (tipo_btn == "tabla_hija"){

				var tabla_hija = $(this).data("hija");
				var ventana = "#dialog_tabla_" + tabla_hija;

				$(ventana).dialog({
				  autoOpen: false,
				  height: 750,
				  width: "90%",
				  modal: true,
				  close: function() { }
				});

				alert (id);

				$.ajax({
					type: "POST",
					url: "ajax/admin_tabla.php",
					data: {tabla: tabla_hija, id_padre: id},
					beforeSend: function() {
					},
					success: function(requestData){
						var rta = requestData;
						$(ventana).html(rta);
					},
					complete: function(requestData, exito){
					},
					error: function (){
						alert ("error");
					}
				});

				var nombre = $(this).data('nombre');
				$(ventana).dialog('option', 'title', 'Administraci\u00f3n de ' + nombre);
				$(ventana).dialog( "open" );

				$(ventana).focus();

			}else if(tipo_btn == "tabla_sas"){
				var tabla = $(this).data("tabla");
				var tipo = $(this).data("tipo");
				var titulo = $(this).data("titulo");
                var id_padre = $(this).data("id_padre");
				var nombre = $(this).data('nombre');

				IniciarVentana("ventana_menu", "abrir", tabla);
				$(ventana_menu).html('');
				$(ventana_menu).dialog('option', 'title', 'Administraci\u00f3n de ' + nombre);
				$(ventana_menu).dialog( "open" );
				$(ventana_menu).focus();

				$(ventana_menu).dialog({
				  autoOpen: false,
				  height: 670,
				  width: "90%",
				  modal: true,
				  close: function() {  }
				});

				$.ajax({
					type: "POST",
					url: "../ajax/admin_tabla.php",
					data: {tabla: tabla, id_padre: id_padre, tipo: tipo},
					beforeSend: function() {
					},
					success: function(requestData){
						var rta = requestData;
						$(ventana_menu).html(rta);
					},
					complete: function(requestData, exito){
					},
					error: function (){
						alert ("error");
					}
				});

				$(ventana_menu).dialog('option', 'title', titulo);
				$(ventana_menu).dialog( "open" );
			}else if(tipo_btn == "tabla_eme"){
        		var tabla = $(this).data("tabla");
        		var tipo = $(this).data("tipo");
        		var titulo = $(this).data("titulo");
                var id = $(this).data("id");

        		IniciarVentana("ventana_menu", "abrir", tabla);
        		$(ventana_menu).html('');
        		$(ventana_menu).dialog('option', 'title', 'Editar Paciente');
        		$(ventana_menu).dialog( "open" );
        		$(ventana_menu).focus();

        		$(ventana_menu).dialog({
        		  autoOpen: false,
        		  height: 670,
        		  width: "90%",
        		  modal: true,
        		  close: function() {  }
        		});

        		$.ajax({
        			type: "POST",
        			url: "../ajax/admin_form.php",
        			data: {id: id, tabla: tabla, tipo: tipo},
        			beforeSend: function() {
        			},
        			success: function(requestData){
        				var rta = requestData;
        				$(ventana_menu).html(rta);
        			},
        			complete: function(requestData, exito){
        			},
        			error: function (){
        				alert ("error");
        			}
        		});

        		$(ventana_menu).dialog('option', 'title', titulo);
        		$(ventana_menu).dialog( "open" );
        	}else if(tipo_btn == 'dialog_sas'){
        		var tabla = $(this).data("tabla");
        		var tipo = $(this).data("tipo");
        		var titulo = $(this).data("titulo");

        		IniciarVentana("ventana_opciones", "abrir", tabla, tipo);

        		$.ajax({
        			type: "POST",
        			url: "../ajax/admin_form.php",
        			data: {tabla: tabla, id: id, tipo: tipo, id_padre: id_padre},
        			beforeSend: function() {
        				$(ventana_opciones).html("");
        			},
        			success: function(requestData){
        				var rta = requestData;
        				$(ventana_opciones).html(rta);
        			},
        			complete: function(requestData, exito){
        			},
        			error: function (){
        				alert ("error");
        			}
        		});

        		$(ventana_opciones).dialog('option', 'title', titulo);
        		$(ventana_opciones).dialog( "open" );
            }else{
				var tabla = $(this).data("tabla");
				var tipo = $(this).data("tipo");
				var titulo = $(this).data("titulo");
				var id_padre = $(this).data("id_padre");
				var ventana = "#dialog";

				$(ventana).dialog({
				  autoOpen: false,
				  height: 500,
				  width: "50%",
				  modal: true,
				  close: function() {  }
				});

				$.ajax({
					type: "POST",
					url: "../ajax/admin_form.php",
					data: {tabla: tabla, id: id, tipo: tipo, id_padre: id_padre},
					beforeSend: function() {
					},
					success: function(requestData){
						var rta = requestData;
						$(ventana).html(rta);
					},
					complete: function(requestData, exito){
					},
					error: function (){
						alert ("error");
					}
				});

				$(ventana).dialog('option', 'title', titulo);
				$(ventana).dialog( "open" );
			}

		})

        $(document).on("click",".btn_eliminar",function(){
        	if (console && console.log) console.log('click eliminar');
        	var id = $(this).data("id");
        	var tabla = $(this).data("tabla");

        	$("#dialog_eliminar").dialog({
        		resizable: false,
        		height:200,
        		modal: true,
        		buttons: {
        			"Aceptar": function() {
        				$.ajax({
        					type: "POST",
        					url: "../ajax/bajas.php",
        					data: {tabla:tabla, id: id},
        					beforeSend: function() {
        						$("#mje").html("Enviando información...");
        					},
        					success: function(requestData){
        						switch (tabla){
        							case 'medicos_horarios':
        								TableMedicosHorarios.fnDraw();
        							break;
        							case 'medicos_especialidades':
        								TableMedicosEspecialidades.fnDraw();
        							break;
        							case 'medicos_obras_sociales':
        								TableMedicosObrasSociales.fnDraw();
        							break;
        						};
        						alert(requestData);
                                $('.btn_eliminar[data-id="' + id + '"]').parent().parent().find('td').attr('style', 'color:#900;font-weight:bold;text-decoration:line-through;');
                                $('.btn_eliminar[data-id="' + id + '"]').parent().parent().find('td a').remove();
        					},
        					complete: function(requestData, exito){},
        					error: function (){
        						alert ("ERROR AL CARGAR. Vuelva a Intentarlo.");
        					}
        				});
        				$( this ).dialog( "close" );
        			},
        			Cancel: function() {
        			  $( this ).dialog( "close" );
        			  return;
        			}
        		}
        	});
        });

	</script>
</head>

<body id="sam">
    <div id="notLayer"></div>
    <div id="dieAjaxNovedadesDiv"></div>
	<!--script type="text/javascript" src="../blab_im_free/bar.php"></script//-->
    <div id="mensaje_gral" class="oculto">
    	<img src="[IMG]loader.gif"><br>
        Cargando...
  	</div>
    <div class="row oculto">
        <h1>[TITULO_SITIO]</h1>
    </div>
   [CUERPO]
</body>
</html>
